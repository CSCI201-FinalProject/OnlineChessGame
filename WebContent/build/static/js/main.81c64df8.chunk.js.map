{"version":3,"sources":["components/Square.js","components/PromotionChoice.js","components/Game.js","components/Piece.js","components/BoardSquare.js","components/Board.js","App.js","reportWebVitals.js","index.js"],"names":["Square","children","bgClass","black","className","promotionPieces","PromotionChoice","promotion","from","to","color","map","p","i","onClick","move","src","chess","Chess","gameSubject","BehaviorSubject","board","console","log","document","cookie","myUsername","ws","WebSocket","myMove","hasStarted","result","tmp","window","location","search","substr","split","forEach","item","decodeURIComponent","opponentUsername","onopen","event","send","firstText","tempMove","updateGame","pendingPromotion","isGameOver","game_over","newGame","turn","getGameResult","started","next","whitePiecesUsername","blackPiecesUsername","in_checkmate","winner","in_draw","reason","in_stalemate","in_threefold_repitition","insufficient_material","onmessage","data","substring","jsonMove","JSON","parse","onclose","onerror","Piece","piece","type","position","useDrag","id","collect","monitor","isDragging","drag","preview","pieceImg","DragPreviewImage","connect","ref","style","opacity","BoardSquare","useState","setPromotion","useDrop","accept","drop","promotions","moves","verbose","filter","m","table","some","getValue","handleMove","useEffect","subscribe","unsibscribe","Board","currBoard","setCurrBoard","getXYPosition","x","Math","abs","y","floor","isBlack","getPosition","flat","reverse","goToHomeMenu","href","App","setBoard","setIsGameOver","setResult","setStarted","setMyUsername","setOpponentUsername","game","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","getElementById"],"mappings":"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","file":"static/js/main.81c64df8.chunk.js","sourcesContent":["import React from 'react'\n\nexport default function Square({children, black}) {\n    \n    const bgClass = black ? 'square-black' : 'square-white'\n    \n    return (\n    <div className = {`${bgClass} board-square`}> \n        {children}\n    </div> \n    )\n}","import React, {useEffect, useState} from 'react'\nimport Square from './Square'\nimport {move} from './Game'\n\nconst promotionPieces = ['r', 'n', 'b', 'q']\n\nexport default function PromotionChoice({\n    promotion: {from, to, color},\n})\n{\n    return(\n       <div className = \"board\"> \n           {promotionPieces.map((p, i) => (\n                <div key = {i} className = \"promote-square\">\n                    <div className = \"piece-container\" \n                    onClick={()=> move(from, to, p)} >\n                        <img \n                        src = {`assets/images/${p}_${color}.png`} \n                        className = \"piece cursor-pointer\"\n                        />\n                    </div>\n                </div>\n           ))}\n       </div>\n   )\n\n}","import { getByPlaceholderText } from '@testing-library/dom';\nimport * as Chess from 'chess.js'\nimport {BehaviorSubject} from 'rxjs'\nimport PromotionChoice from './PromotionChoice'\n\n\nconst chess = new Chess();\n\n\n\nfunction parseURLParams(url) {\n    var queryStart = url.indexOf(\"?\") + 1,\n        queryEnd   = url.indexOf(\"#\") + 1 || url.length + 1,\n        query = url.slice(queryStart, queryEnd - 1),\n        pairs = query.replace(/\\+/g, \" \").split(\"&\"),\n        parms = {}, i, n, v, nv;\n\n    if (query === url || query === \"\") return;\n\n    for (i = 0; i < pairs.length; i++) {\n        nv = pairs[i].split(\"=\", 2);\n        n = decodeURIComponent(nv[0]);\n        v = decodeURIComponent(nv[1]);\n\n        if (!parms.hasOwnProperty(n)) parms[n] = [];\n        parms[n].push(nv.length === 2 ? v : null);\n    }\n    return parms;\n}\nexport const gameSubject = new BehaviorSubject({\n    board: chess.board\n})\n\nexport function initGame() {\n    updateGame()\n}\n\nexport function resetGame() {\n    chess.reset()\n    updateGame()\n}\n\nexport function handleMove(from, to) {\n    // Array of all possible promotions from the current position\n    const promotions = chess.moves({verbose: true}).filter(m => m.promotion)\n    console.table(promotions)\n    // Some method is if one item in array satisfies condition\n    if(promotions.some(p => `${p.from}:${p.to}` === `${from}:${to}`)) {\n        const pendingPromotion = {from, to, color: promotions[0].color}\n        updateGame(pendingPromotion) \n    }\n\n    const {pendingPromotion} = gameSubject.getValue()\n\n    if(!pendingPromotion) {\n        move(from, to)\n    }\n}\n\nconsole.log(document.cookie);\n\n// document.cookie = \"username=Marcotte07\";\nvar ws = new WebSocket(\"ws://ec2-13-58-104-183.us-east-2.compute.amazonaws.com:8080/OnlineChessGame/GameEndpoint\");\n\nexport var color = 'b';\n\nvar myMove = false;\nvar hasStarted = false;\n\n// Once cookie works this will be good\n// export var myUsername = document.cookie\n    \nexport var myUsername;\n\nvar result = null;\nvar tmp = [];\nwindow.location.search\n.substr(1)\n.split(\"&\")\n.forEach(function (item) {\n  tmp = item.split(\"=\");\n  if (tmp[0] === \"name\") result = decodeURIComponent(tmp[1]);\n});\n\nconsole.log(\"result is\" + result);\nmyUsername = result;\n\nexport var opponentUsername = \"Waiting For Player To Connect\";\n// Now block here for opponents move to come back\n// TODO; randomly assign color\nws.onopen = function(event) {\n    ws.send(\"username=\"+myUsername);\n}\nvar firstText = true;\nws.onmessage = function(event) {\n    \n    console.log(\"Recieved data from server \" + event.data)\n    // If they send opponents username and any other info: \n    if(event.data.substring(0, 9) == \"username=\"){\n        opponentUsername = event.data.substring(9);\n        console.log(\"Player Connected, opponent username is game.js is: \" + opponentUsername);\n        updateGame();\n    }\n    \n    else if (!firstText) {\n        var jsonMove = JSON.parse(event.data);\n\n        var from = jsonMove.from;\n        var to = jsonMove.to;\n        var promotion = jsonMove.promotion\n        let tempMove = {from, to}\n        if(promotion) {\n            tempMove.promotion = promotion\n        }\n        const legalMove = chess.move(tempMove)\n        if(legalMove) {\n           // color = jsonMove.color\n            updateGame();\n            myMove = true;\n        }    \n    } else {\n        hasStarted = true;\n        firstText = false;\n        color = event.data;\n        if(color === \"w\"){\n            myMove = true;\n        }\n        updateGame()\n    }\n \n}\nws.onclose = function(event) {\n    // document.getElementById(\"mychat\").innerHTML += \"Disconnected!<br />\";\n}\nws.onerror = function(event) {\n    //alert('check');\n}\n\nexport function move(from, to, promotion) {\n    if(!myMove){\n        return;\n    }\n    let tempMove = {from, to}\n    if(promotion) {\n        tempMove.promotion = promotion\n    }\n    const legalMove = chess.move(tempMove)\n    if(legalMove) {\n        updateGame();\n        ws.send(`{\"from\":\"${from}\",\"to\":\"${to}\",\"promotion\":\"${promotion}\"}`, function(){});\n        myMove = false;\n    }    \n}\n\nfunction updateGame(pendingPromotion) {\n    const isGameOver = chess.game_over()\n    \n    const newGame =  {\n        board: chess.board(),\n        pendingPromotion,\n        isGameOver,\n        turn: chess.turn(),\n        result: isGameOver ? getGameResult() : null, \n        myUsername: myUsername,\n        opponentUsername: opponentUsername,\n        started: hasStarted\n    }\n\n    gameSubject.next(newGame)\n}\n\nfunction getGameResult() {\n    // Lets send result of game to server in this method!\n    let whitePiecesUsername = \"\"\n    let blackPiecesUsername = \"\"\n    if(color == 'w'){\n        whitePiecesUsername = myUsername;\n        blackPiecesUsername = opponentUsername;\n    }\n    else{\n        whitePiecesUsername = myUsername;\n        blackPiecesUsername = opponentUsername;\n    }\n    if(chess.in_checkmate()) {\n        const winner = (chess.turn() === \"w\") ? 'BLACK' : 'WHITE'\n        \n        // Didn't win, so dont call it\n        console.log(\"My color is \" + color + \" and the winner is \" + winner);\n\n        // Two cases to send info to server, if white and won, or if black and won\n        if(color == 'w' && winner == 'WHITE' ){\n            console.log(\"sending game over info to server\")\n            ws.send(\"GameOver,\" + whitePiecesUsername + \",\" \n            + blackPiecesUsername + \",win\");\n        }\n        else if(color == 'b' && winner == 'BLACK') {\n            console.log(\"sending game over info to server\")\n            ws.send(\"GameOver,\" + whitePiecesUsername + \",\" \n            + blackPiecesUsername + \",win\");\n        }\n        \n        return `CHECKMATE - WINNER - ${winner}`\n    }\n    else if (chess.in_draw()) {\n        let reason = '50 - MOVES - RULE'\n        if(chess.in_stalemate()) {\n            reason = 'STALEMATE'\n        }\n        else if(chess.in_threefold_repitition()){\n            reason = 'REPITITION'\n        }\n        else if(chess.insufficient_material()){\n            reason = 'INSUFFICIENT MATERIAL'\n        }\n        \n        // Arbitrarily only have white call this so both clients dont send the same info\n        if(color == 'w'){ \n            ws.send(\"GameOver,\" + whitePiecesUsername + \",\" \n            + blackPiecesUsername + \",tie\");\n        }\n\n        return `DRAW - ${reason}`\n\n    }\n    else{\n        return 'UNKNOWN REASON'\n    }\n}","import React from 'react'\nimport {useDrag, DragPreviewImage} from 'react-dnd'\n\nexport default function Piece({piece: {type, color}, position}) {\n    const [{isDragging} , drag, preview] = useDrag({\n        item: {\n            type: 'piece', \n            id: `${position}_${type}_${color}`,\n        },\n        collect: (monitor) => {\n            return {isDragging: !!monitor.isDragging()}\n        },\n    })\n    const pieceImg = (`assets/images/${type}_${color}.png`);\n    return( \n    <div className = \"test\">\n        <DragPreviewImage connect={preview} src ={pieceImg}>\n        </DragPreviewImage>\n        <div className = \"piece-container\" ref={drag} style ={{opacity: isDragging ? 0 : 1 }} >\n            <img src = {pieceImg}  className = \"piece\"/>\n        </div> \n    </div>\n    )\n}","import React, {useEffect, useState} from 'react'\nimport Square from './Square'\nimport Piece from './Piece'\nimport {useDrop} from 'react-dnd'\nimport {handleMove} from './Game'\nimport {gameSubject} from './Game'\nimport PromotionChoice from './PromotionChoice'\n\nexport default function BoardSquare({piece, black, position}) {\n    \n    const [promotion, setPromotion] = useState(null)\n    \n    const [ , drop] = useDrop({\n        accept: 'piece',\n        drop: (item) => {\n            let arr = item.id.split('_')\n            const fromPosition = arr[0];\n            handleMove(fromPosition, position)\n        },\n    })\n   \n    useEffect(() => {\n        const subscribe = gameSubject.subscribe(({pendingPromotion}) =>\n            pendingPromotion && pendingPromotion.to === position \n            ? setPromotion(pendingPromotion)\n            : setPromotion(null)\n        )\n        return () => subscribe.unsibscribe()\n    }, [])\n\n    return (\n        <div className = \"board-square\" ref = {drop}> \n            <Square black={black}>\n                {promotion ?  (\n                <PromotionChoice promotion = {promotion}/> \n                ) : piece ? (\n                 <Piece piece = {piece} position={position} />\n                ) : null}\n            </Square>\n        </div>\n    )\n}","import React, {useEffect, useState} from 'react'\nimport BoardSquare from './BoardSquare'\nimport {color} from './Game'\n\n\nexport default function Board({board, turn}){\n    const [currBoard, setCurrBoard] = useState([]);\n    useEffect(() => {\n        setCurrBoard(\n            color === 'w' ? board.flat() : board.flat().reverse()\n    \n        )\n    }, [board, turn])\n    function getXYPosition(i) {\n        const x = color === 'w' ? i % 8 : Math.abs(i % 8 - 7);\n        const y = color === 'w' ? Math.abs(Math.floor(i / 8) - 7) : Math.floor(i / 8)\n        /*\n        const x = i % 8;\n        const y = Math.abs(Math.floor(i / 8) - 7);\n        */\n        return {x, y}\n    }\n    function isBlack (i) {\n        const {x,y} = getXYPosition(i);\n        \n        return (x + y)  % 2 == 0;\n    }\n\n    function getPosition(i){\n        const {x,y} = getXYPosition(i);\n        const letter = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"][x]\n        return `${letter}${y + 1}`;\n    }\n    return <div className = \"board\">\n        {currBoard.map((piece, i) => (\n        <div key = {i} className = \"square\">\n             <BoardSquare \n             piece={piece} \n             black = {isBlack(i)} \n             position = {getPosition(i)}/>\n        </div>\n        ))}\n    </div>\n}","import './App.css';\nimport React, {useEffect, useState} from 'react'\nimport {gameSubject, initGame, resetGame} from './components/Game'\nimport Board from './components/Board'\n// import {myUsername, opponentUsername} from './components/Game'\n\n// console.log(\"opponent username is: \" + opponentUsername);\nfunction App() {\n  const [board, setBoard] = useState([]);\n  const [isGameOver, setIsGameOver] = useState()\n  const [result, setResult] = useState()\n  const [started, setStarted] = useState()\n  const [myUsername, setMyUsername] = useState()\n  const [opponentUsername, setOpponentUsername] = useState()\n  \n  useEffect(() => {\n    initGame()\n    const subscribe = gameSubject.subscribe((game) => {\n      setBoard(game.board)\n      setIsGameOver(game.isGameOver)\n      setResult(game.result)\n      setStarted(game.started)\n      setMyUsername(game.myUsername)\n      setOpponentUsername(game.opponentUsername)\n    })\n    return () => subscribe.unsibscribe()\n  }, [])\n\n  return (\n    \n<div> \n  <div> \n    {result && <button className = \"returnButton\" \n    onClick = {goToHomeMenu}> \n    <h1> MAIN MENU </h1>\n    </button>}\n  </div>\n  <div className = \"searching\">\n    {started ? \"\" : \"Searching For Game...\"}\n  </div>\n\n    <div className = \"container\">\n\n      {isGameOver && (\n        <h2 className = \"vertical-text\"> GAME OVER\n        </h2>\n        \n      )}\n      <div className = \"board-container\">\n        <div className = \"opponentUsernameBox\">\n          {opponentUsername}\n        </div>\n\n        <Board board = {board}/>\n        <div className = \"myUsernameBox\">\n          {myUsername}\n        </div>\n      </div> \n      {result && <p className = \"vertical-text\">{result}</p>}\n    </div>\n</div>\n  );\n}\n\nfunction goToHomeMenu(){\n  window.location.href = \"http://ec2-13-58-104-183.us-east-2.compute.amazonaws.com:8080/OnlineChessGame/\";\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {DndProvider} from 'react-dnd';\nimport {HTML5Backend} from 'react-dnd-html5-backend';\nReactDOM.render(\n  <React.StrictMode>\n    <DndProvider backend = {HTML5Backend} >\n      <App />\n    </DndProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}